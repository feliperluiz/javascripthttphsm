Então o que foi feito foi o seguinte:
1 - Entrei no HSM da dinamo aqui e peguei o certificado do HSM.
2 - Criei um certificado localmente via openssl com seu par de chaves.

3 - Mudei o modo de autenticação duplo fator de um cliente para usar x509. (devo ir no HSM, no compart. e alterar a autenticação para uso do certificado).
4 - Ao fazer essa mudança, eu devo associar um certificado a esse usuário. (ir ao HSM e associar o certificado que eu criei via OPENSSL)
5 - Associei o certificado que criei localmente para esse usuário. Ou seja, esse certificado foi enviado para o HSM e armazenado para que depois possa ser conferido.

6 - Agora pode-se estabelecer a comunicação segura utilizando o certificado do HSM e o certificado do usuário.
7 - Você conseguirá usar o HSM para assinar e verificar. A diferença é que no modo fips algumas funções são mais restritivas. Por exemplo, talvez você não consiga exportar chaves do HSM, talvez uma ou outra função não seja permitida.




3.1 Devo criar um client passando os certificados na abertura da conexão client certificate authentication num socket SSL